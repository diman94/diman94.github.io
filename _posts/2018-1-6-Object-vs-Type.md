---
layout: post
title: Object VS Type VS Class VS Instance
---

## Объекты:

Объекты - способ представления любых сущностей в Python. Все данные в Python представлены объектами и связями объектов. 
У каждого объекта есть идентификатор, тип и значение. Идентификатор (identity) никогда не меняется с момента создания объекта. 
Оператор `is` сравнивает идентификтаторы двух объектов; функция `id()` возвращает целочисленный идентификатор объекта.

*Для CPython, id(x) - адрес памяти, где хранится x.*

```
>>> a = 127
>>> b = 128
>>> id(a)
1465020576
>>> id(b)
1465020608
>>> a is b
False
```

В Python все - объект. Списки - это объекты. Строки, модули, функции - это объекты. Байткод программы хранится как объект. У всех объектов есть типы и идентификаторы:

```
>>> def dummy(): pass
...
>>> type(dummy), id(dummy)
(<class 'function'>, 2122090425880)
>>> type(dummy.__code__), id(dummy.__code__)
(<class 'code'>, 2122094942368)
>>>
```

Модель "все - объект" прослеживается и в самой реализации CPython. В коде CPyton к любой сущности, упомянутой выше, можно обратиться через указатель на стркутуру PyObject.

## Типы:
У каждого объекта Python есть тип. Тип можно выяснить, вызвав встроенную функцию `type`. Тип - это тоже объект, поэтому у него есть собственный тип, который называется `type`. Этот факт не слишком полезен для написания простого кода на Python, однако, он важен для понимания внутренностей CPython:

```
>>> type(42)
<class 'int'>
>>> type(type(42))
<class 'type'>
>>> type(type(type(42)))
<class 'type'>
```
Все типы сходятся к type.

## Классы
Давным-давно была разница между встроенными классами и пользовательскими классами, но с версии 2.2  (классы "нового стиля", унаследованные от object в 2.x, и все классы в 3.x) значимых отличий нет. В сущности, класс это механизм Python, который позволяет создавать пользовательские типы в коде Python.
```
>>> class Snake: pass
...
>>> s = Snake()
>>> type(s)
<class '__main__.Snake'>
>>>
```
Используя этот механизм, мы создали Snake - пользовательский тип. s - экземпляр класса Snake. Другими словами, это объект и его тип - Snake.

Как любой другой тип, Snake это тоже объект, и у него тоже есть тип. Его тип - type.

```
>>> type(type(s))
<class 'type'>
```

Термины "class" и "type" оба ссылаются на одну концепцию.
*Примечание: при создании типов через CPython C API нет никакого "класса", мы создаем "тип", а не новый "класс".*

## Экземпляры (instance)
В отличие от неоднозначности терминов "класс" и "тип", экземпляр - это синоним термина "объект".
Еще раз: объекты - это экземпляры типов. Так, "42 это экземпляр типа int" равносильно "42 - объект int". 
Термин "экземпляр" используется во встроенной функции `isinstance()`.

## Примечание
Следует отличать встроенную функцию `isinstance()` и оператор `is`:
`isinstance(object, classinfo)` возвращает True, если аргумент `object` является экземпляром аргумента `classinfo`, либо экземпляром класса, унаследованного от `classinfo`.

Оператор `is`, в свою очередь, возвращает True, если две переменные ссылаются на один объект, т.е. сверяет идентификаторы объектов.
